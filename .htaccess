<IfModule mod_rewrite.c>

RewriteBase /

# handle file versioning
	RewriteEngine On
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^(.+)\.(\d+)\.(bmp|css|cur|gif|ico|jpe?g|js|png|svgz?|webp)$ $1.$3 [L]

# remove .html
#	RewriteCond %{REQUEST_FILENAME} !-f
#	RewriteCond %{REQUEST_FILENAME} !-d
#	RewriteRule ^(.+) $1.html [L]

ErrorDocument 404 /404.html

RewriteCond  %{DOCUMENT_ROOT}/$1.html  -f
RewriteRule  ^(.+)(\.html)?/$         /$1       [R=301,L]

RewriteCond  %{DOCUMENT_ROOT}/$1       -d
RewriteCond  %{DOCUMENT_ROOT}/$1.html  !-f
RewriteRule  ^(.+[^/])$               /$1/      [R=301,L]

RewriteCond  %{DOCUMENT_ROOT}/$1.html  -f
RewriteRule  ^(.+)$                    /$1.html  [L,NC]

RewriteCond  %{DOCUMENT_ROOT}/$1.xml  -f
RewriteRule  ^(.+)(\.xml)?/$         /$1       [R=301,L]

RewriteCond  %{DOCUMENT_ROOT}/$1       -d
RewriteCond  %{DOCUMENT_ROOT}/$1.xml  !-f
RewriteRule  ^(.+[^/])$               /$1/      [R=301,L]

RewriteCond  %{DOCUMENT_ROOT}/$1.xml  -f
RewriteRule  ^(.+)$                    /$1.xml  [L,NC]
</IfModule>